# Modern Git Configuration
# This configuration uses modern tools and best practices

[user]
    name = 
    email = kormie@gmail.com
	signingkey = /Users/david.kormushoff/.ssh/id_ed25519.pub

[init]
    defaultBranch = main

[core]
    editor = nvim
    autocrlf = input
    safecrlf = true
    excludesfile = ~/.gitignore_global
    # Use delta for diff paging when available
    pager = delta

[interactive]
    diffFilter = delta --color-only

[delta]
    navigate = true
    line-numbers = true
    side-by-side = true
    syntax-theme = Dracula
    # Enhanced delta features
    hyperlinks = true
    hyperlinks-file-link-format = "vscode://file/{path}:{line}"
    features = decorations
    whitespace-error-style = 22 reverse

[delta "decorations"]
    commit-decoration-style = bold yellow box ul
    file-style = bold yellow ul
    file-decoration-style = none
    hunk-header-decoration-style = cyan box ul

[merge]
    conflictstyle = diff3

[diff]
    colorMoved = default

[pull]
    rebase = true

[push]
    default = simple
    autoSetupRemote = true

[branch]
    autoSetupMerge = always
    autoSetupRebase = always

[rebase]
    autoStash = true

[status]
    showUntrackedFiles = all

[log]
    date = relative

# GPG Signing Configuration
[gpg]
    format = ssh

[commit]
    gpgsign = true

# Credential and URL Configuration
[credential]
    helper = osxkeychain

[url "git@github.com:"]
    insteadOf = https://github.com/

# Git LFS Configuration
[filter "lfs"]
    clean = git-lfs clean -- %f
    smudge = git-lfs smudge -- %f
    process = git-lfs filter-process
    required = true

[alias]
    # Modern aliases for common operations
    st = status
    co = checkout
    br = branch
    ci = commit
    unstage = reset HEAD --
    last = log -1 HEAD
    visual = !gitk
    
    # Enhanced log aliases with your preferred format
    lg = log --graph --pretty=format:\"%C(yellow)%h%Cred%d%Creset %s %C(white) %C(cyan)%an%Creset, %C(green)%ar%Creset\"
    ll = log --pretty=format:\"%C(yellow)%h%Cred%d\\ %Creset%s%Cblue\\ [%cn]\" --decorate --numstat
    ls = log --pretty=format:\"%C(yellow)%h%Cred%d\\ %Creset%s%Cblue\\ [%cn]\" --decorate
    
    # Additional log formats
    lga = log --graph --pretty=format:\"%C(yellow)%h%Cred%d%Creset %s %C(white) %C(cyan)%an%Creset, %C(green)%ar%Creset\" --all
    tree = log --graph --pretty=format:\"%C(yellow)%h%Cred%d%Creset %s %C(white) %C(cyan)%an%Creset, %C(green)%ar%Creset\" --all --simplify-by-decoration
    
    # Difftastic aliases using GIT_EXTERNAL_DIFF pattern
    dt = !env GIT_EXTERNAL_DIFF=difft git diff
    dts = !env GIT_EXTERNAL_DIFF=difft git diff --staged
    dtl = !env GIT_EXTERNAL_DIFF=difft git log -p --ext-diff
    dtshow = !env GIT_EXTERNAL_DIFF=difft git show --ext-diff
    
    # Useful shortcuts
    amend = commit --amend --no-edit
    fixup = commit --fixup
    squash = commit --squash
    
    # Working with remotes
    sync = !git fetch --all && git pull --rebase
    publish = push -u origin HEAD
    
    # Clean up
    cleanup = !git branch --merged | grep -v '\\*\\|main\\|master\\|develop' | xargs -n 1 git branch -d

[color]
    ui = auto
    branch = auto
    diff = auto
    status = auto

[color "branch"]
    current = yellow reverse
    local = yellow
    remote = green

[color "diff"]
    meta = yellow bold
    frag = magenta bold
    old = red bold
    new = green bold

[color "status"]
    added = yellow
    changed = green
    untracked = cyan

# Include local/private config if it exists
[include]
    path = ~/.gitconfig.local
[gpg "ssh"]
	allowedSignersFile = /Users/david.kormushoff/.ssh/allowed_signers
